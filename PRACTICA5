CREATE TABLE PELICULA(ID_PELICULA INTEGER,TITULO VARCHAR2(20),
SIPNOPSIS VARCHAR2(100),
CONSTRAINT PK_ID_PELICULA PRIMARY KEY (ID_PELICULA));

CREATE TABLE SALA(NUM_SALA INTEGER,ID_PELICULA INTEGER,
CONSTRAINT PK_NUM_SALA PRIMARY KEY(NUM_SALA),
CONSTRAINT FK1_ID_PELICULA,FOREIGN KEY (ID_PELICULA) REFERENCES 
PELICULA (ID_PELICULA));


CREATE TABLE HORARIO(ID_HORARIO INTEGER,ID_PELICULA INTEGER,
FECHA DATE,
CONSTRAINT PK_ID_HORARIO PRIMARY KEY(ID_HORARIO),
CONSTRAINT FK2_ID_PELICULA FOREIGN KEY(ID_PELICULA)REFERENCES PELICULA(ID_PELICULA));



CREATE SEQUENCE SEC_PELICULA
START WITH 1
INCREMENT BY 1
NOMAXVALUE;

CREATE SEQUENCE SEC_HORARIO
START WITH 1
INCREMENT BY 1
NOMAXVALUE;


---PROCEDIMIENTOS
CREATE OR REPLACE PROCEDURE GUARDAR_PELICULA(MY_ID_PELICULA OUT INTEGER,
MY_TITULO IN VARCHAR2,MY_SIPNOSIS IN VARCHAR2) AS
BEGIN 
SELECT SEC_PELICULA.NEXTVAL INTO MY_ID_PELICULA FROM DUAL;
INSERT INTO PELICULA VALUES(MY_ID_PELICULA,MY_TITULO, MY_SIPNOSIS);
END;
/

CREATE OR REPLACE PROCEDURE GUARDAR_SALA (MY_NUM_SALA IN INTEGER,MY_ID_PELICULA
IN INTEGER AS
BEGIN 
INSERT INTO SALA VALUES (MY_NUM_SALA, MY_ID_PELICULA);
END;
/


CREATE OR REPLACE PROCEDURE GUARDAR_HORARIO(MY_ID_HORARIO OUT INTEGER,
MY_ID_PELICULA IN INTEGER,MY_FECHA  IN DATE)AS
BEGIN
SELECT SEC_HORARIO.NEXTVAL INTO MY_ID_HORARIO FROM DUAL;
INSERT INTO HORARIOS VALUES(MY_ID_HORARIO,MY_ID_PELICULA,MY_FECHA);
END;
/




